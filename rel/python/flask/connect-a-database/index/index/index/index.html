<!DOCTYPE html><html lang=en><head><title>Nanobox</title><meta name=viewport content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel=stylesheet href=/style.css><link href="//fonts.googleapis.com/css?family=Lato:400,400italic" rel=stylesheet type=text/css><link rel=icon type=image/png href=/assets/favicon.png></head><body><div class=main-wrapper><div style=height:49px; class=top-nav-wrapper><div class=top-nav><a href="/" class=logo><div class=img></div><div class=company>Nanobox</div></a><div class=index-items><div id=local-link data-target=#local class="jumper active">Local</div><div id=deploy-link data-target=#deploy class=jumper>Deploy</div><div id=live-link data-target=#live class=jumper>Live</div></div><div class=menu><div class=nav><a href=http://dashboard.nanobox.io>Sign Up</a></div></div><div class=hamburg-icon><img data-src=hamburg-menu class=shadow-icon></div></div></div><div class=content-area><div class=article-page><div id=left-nav class=left><div class=article-nav><div class=title></div><div class=articles></div></div></div><div class=main><div class=markdown><h1 id=rails-connect-a-database>Rails: Connect a Database</h1><p>With an application (app) <a href=getting-started.html#up-and-running>up and running</a> in the development (dev) environment using nanobox, lets connect a database.</p><p>This guide is broken down into three sections:</p><ol><li><a href=add-a-data-component>Add a data component</a></li><li><a href=connect-your-app>Connect your app</a></li><li><a href=test-the-connection>Test the connection</a></li></ol><h2 id=add-a-data-component>Add a data component</h2><p>Nanobox apps are comprised of <a href>components</a>. If your app has a database it needs to connect to, then you can add <a href>a data component</a>.</p><h4 id=specify-the-component>Specify the component</h4><p>To add a data component to your app, simply add a data component to your <code>boxfile.yml</code> like in the following example:</p><pre><code class=lang-yaml># because we&#39;re using flask we need to tell nanobox that we need python in our
# container
code.build:
  engine: &quot;python&quot;

# specify that we need a data component (called &quot;db&quot;); for this example we&#39;ll
# use postgresql as our database
data.db:
  image: nanobox/postgresql
</code></pre><h4 id=provision-the-component>Provision the component</h4><p>In order for nanobox to provision your data component, you&#39;ll need to rebuild your environment and deploy it to the dev runtime:</p><pre><code class=lang-bash># build your new environment
nanobox build

# deploy the environment to the dev runtime
nanobox dev deploy
</code></pre><h2 id=connect-your-app>Connect your app</h2><p>When a data component is provisioned with nanobox, unique connection credentials are generated along with <a href>environment variables</a>. The key for each variable is based on the <a href>component ID</a> in your boxfile.yml. Using environment variables in this way allows your app to be secure yet portable.</p><h4 id=environment-variables>Environment Variables</h4><p>With the data component added, nanobox would generate the following environment variables:</p><pre><code class=lang-bash>DATA_DB_HOST = &lt;your-apps-ip&gt;
DATA_DB_USER = nanobox
DATA_DB_PASS = &lt;unique-password&gt;
</code></pre><p><strong><em>PRO TIP:</em></strong> You can list environment variables your dev environment has available using <code>nanobox dev evar ls</code> or <code>nanobox dev console</code>:</p><pre><code class=lang-bash># list all nanobox environment variables
nanobox dev evar ls

# console into the dev environment and list ALL environment variables
nanobox dev console
env
</code></pre><h4 id=connection-credentials>Connection Credentials</h4><table><thead><tr><th>credential</th><th>value</th></tr></thead><tbody><tr><td>port</td><td>the default port for that service</td></tr><tr><td>name</td><td>gonano</td></tr></tbody></table><p>For flask, you&#39;ll need to modify your <code>WIP</code> to connect your app:</p><pre><code class=lang-yaml>WIP
</code></pre><h2 id=test-the-connection>Test the connection</h2><p>With your data component provisioned, and your app updated to connect to it, it&#39;s time to test that connection. You can do this in one of several ways.</p><h4 id=connect-an-external-client>Connect an external client</h4><p>You can test your connection by connecting an external client to your database using the <a href=#connection-credentials>connection credentials</a> above. You&#39;ll also need to run <code>nanobox dev info</code> to get the host, username, and password.</p><h4 id=running-your-app>Running your app</h4><p>You can also test your connection by simply trying to run your app and see if it is able to connect. In flask we could run the following command:</p><pre><code class=lang-bash># console into the dev environment
nanobox dev console

# attempt to setup the database
WIP
</code></pre><h2 id=now-what->Now what?</h2><p>With a database connected to your app, whats next? Think about what else your app might need and hopefully the topics below will help you get started with the next steps of your development!</p><ul><li><a href=prepare-for-production.html>Prepare for production</a></li><li><a href=launch-your-app.html>Launch your app</a></li><li><a href=overview.html>Back to flask overview</a></li></ul></div></div></div></div></div><script src=/js/libs.js></script><script src=/js/main.js></script><script src=https://use.typekit.net/cqd5kth.js></script><script>try{Typekit.load({ async: true });}catch(e){}</script><script>article = new Article("Connect a Database", "python/flask")
$main = $('.main')
nanobox.addBreadcrumb( $main )
nanobox.addIcons( $main, "python,flask" )

</script><script type=text/javascript>$mainwrapper = $(".main-wrapper");
castShadows( $('.main-wrapper') );
topNav = new nanobox.TopNav( $(".top-nav") );
</script><script type=text/javascript>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-78086337-1', 'auto');
ga('send', 'pageview');

  </script></body></html>
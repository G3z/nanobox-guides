<!DOCTYPE html><html lang=en><head><title>Nanobox</title><meta name=viewport content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><link rel=stylesheet href=/style.css><link href="//fonts.googleapis.com/css?family=Lato:400,400italic" rel=stylesheet type=text/css><link rel=icon type=image/png href=/assets/favicon.png></head><body><div class=main-wrapper><div style=height:49px; class=top-nav-wrapper><div class=top-nav><a href="/" class=logo><div class=img></div><div class=company>Nanobox</div></a><div class=index-items><div id=local-link data-target=#local class="jumper active">Local</div><div id=deploy-link data-target=#deploy class=jumper>Deploy</div><div id=live-link data-target=#live class=jumper>Live</div></div><div class=menu><div class=nav><a href=http://dashboard.nanobox.io>Sign Up</a></div></div><div class=hamburg-icon><img data-src=hamburg-menu class=shadow-icon></div></div></div><div class=content-area><div class=article-page><div id=left-nav class=left><div class=article-nav><div class=title></div><div class=articles></div></div></div><div class=main><div class=markdown><h1 id=wordpress-boxfile-yml-explained>WordPress boxfile.yml Explained</h1><p>The boxfile.yml provided in this guide includes all config options required to get a basic WordPress install up and running. Each of the config options are explained below.</p><pre><code class=lang-yaml>code.build:
  engine: php
  config:
    runtime: php-7.0
    extensions:
      - gd
      - mysqli
      - curl
      - zlib

web.wp:
  start:
    fpm: start-php
    apache: start-apache
  log_watch:
    apache[access]: /data/var/log/apache/access.log
    apache[error]: /data/var/log/apache/error.log
    php[error]: /data/var/log/php/php_error.log
    php[fpm]: /data/var/log/php/php_fpm.log
  network_dirs:
    data.storage:
      - wp-content/uploads/

data.db:
  image: nanobox/mysql

data.storage:
  image: nanobox/unfs
</code></pre><h2 id=code-build>code.build</h2><p>The <code>code.build</code> section of your boxfile.yml allows you to configure how your code and its runtime environment are built and prepared for deploy.</p><h3 id=engine>engine</h3><p>The <code>engine</code> specified in your <code>code.build</code> tells Nanobox which <a href="https://docs.nanobox.io/engines/">engine</a> to use when building your app. Engines define the runtime/language to use and come with different configuration options. WordPress needs the <code>php</code> engine.</p><pre><code class=lang-yaml>code.build:
  engine: php
</code></pre><h3 id=runtime>runtime</h3><p>The <code>runtime</code> defines the PHP version. WordPress doesn&#39;t officially support running on PHP 7+, but PHP 7.0 offers significant performance improvements over previous versions of PHP. If you&#39;re migrating an existing WordPress app to Nanobox, it may be better to stick with an earlier version of PHP. A list of available php version is available in the <a href=/php/config/php-settings/#runtime>PHP Settings guide</a>.</p><pre><code class=lang-yaml>code.build:
  config:
    runtime: php-7.0
</code></pre><h3 id=extensions>extensions</h3><p>The Nanobox PHP engine is designed to keep environments light, installing only the extensions necessary to run your app. The extensions necessary for WordPress to function are the following:</p><table><thead><tr><th style=text-align:left>Extension</th><th style=text-align:left>Purpose</th></tr></thead><tbody><tr><td style=text-align:left><code>mysqli</code></td><td style=text-align:left>The driver used to connect to MySQL</td></tr><tr><td style=text-align:left><code>gd</code></td><td style=text-align:left>Used to resize uploaded images and generate thumbnails</td></tr><tr><td style=text-align:left><code>curl</code></td><td style=text-align:left>Used to send requests to remote servers</td></tr><tr><td style=text-align:left><code>zlib</code></td><td style=text-align:left>Handles gzip&#39;d files, used to install/update plugins &amp; themes</td></tr></tbody></table><pre><code class=lang-yaml>code.build:
  config:
    extensions:
      - gd
      - mysqli
      - curl
      - zlib
</code></pre><h2 id=web-component>Web Component</h2><p>Your web component will run WordPress and make it accessible over the public network. By including a web component in your boxfile.yml, Nanobox will automatically create it using settings specified in your <a href=#code-build><code>code.build &gt; config</code></a> as well as settings unique to your web component.</p><p>Each component in your boxfile.yml has an ID. The ID tells Nanobox what type of component to create and provides unique identifier. In this case, we&#39;ll use <code>web.wp</code>. <code>web</code> tells Nanobox to create a web component and <code>wp</code> is the unique identifier.</p><h3 id=start>start</h3><p>Each web component requires one or more start commands. These tell Nanobox what commands to run to start the web server and php interpreter. By default, the PHP engine uses Apache and PHP-FPM. The following commands start each of those services.</p><pre><code class=lang-yaml>web.wp:
  start:
    fpm: start-php
    apache: start-apache
</code></pre><p>Other web servers and php interpreters are available and require different start commands. More information is provided in the following PHP guides:</p><p><a href="http://localhost:4567/php/config/web-server-settings/">PHP Web Server Settings</a><br><a href="http://localhost:4567/php/config/start/">PHP Start Commands</a></p><h3 id=log_watch>log_watch</h3><p>Nanobox&#39;s <a href="https://docs.nanobox.io/app-config/app-logs/"><code>log_watch</code> config option</a> pipe log output that is typically written to a file into your app&#39;s log stream. This allows you to view those logs without having to inspect the actual log file. What log_watches you use depends on the Web Server and PHP interpreter you&#39;re using. More information is available in the <a href=#>PHP Start Commands guide</a>.</p><pre><code class=lang-yaml>web.wp:
  log_watch:
    apache[access]: /data/var/log/apache/access.log
    apache[error]: /data/var/log/apache/error.log
    php[error]: /data/var/log/php/php_error.log
    php[fpm]: /data/var/log/php/php_fpm.log
</code></pre><h3 id=network_dirs>network_dirs</h3><p>Network directories allow you to store the contents of specific directories in a persistent file-store. When deploying to Nanobox, web nodes are replaced by all new, updated web nodes. Without network directories, any uploads or change to the files in your app would be wiped out. Network directories allow things like uploads to persist and be shared by multiple web nodes. These require a <a href=#storage-component>storage component</a>.</p><h2 id=mysql-database-component>MySQL Database Component</h2><p>WordPress needs a MySQL database. Including a data component with the <code>image</code> set to <code>nanobox/mysql</code> will tell Nanobox to provision a MySQL database when deploying your app.</p><pre><code class=lang-yaml>data.db:
  image: nanobox/mysql
</code></pre><h2 id=storage-component>Storage Component</h2><p>WordPress allows users to upload files into the filesystem. This can cause problems in multi-node, distributed applications (discussed in depth in the <a href="https://docs.nanobox.io/app-config/network-storage/">Network Storage documentation</a>) and when deploying. In order for uploaded files to be shared with all web nodes and persist between deploys, you need a data/storage component that uses the <code>nanobox/unfs</code> image.</p><pre><code class=lang-yaml>data.storage:
  image: nanobox/unfs
</code></pre></div></div></div></div></div><script src=/js/libs.js></script><script src=/js/main.js></script><script src=https://use.typekit.net/cqd5kth.js></script><script>try{Typekit.load({ async: true });}catch(e){}</script><script>article = new Article("WordPress boxfile.yml Explaied", "php/wordpress", "php,wordpress")

</script><script type=text/javascript>$mainwrapper = $(".main-wrapper");
castShadows( $('.main-wrapper') );
topNav = new nanobox.TopNav( $(".top-nav") );
</script><script type=text/javascript>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-78086337-1', 'auto');
ga('send', 'pageview');

  </script></body></html>